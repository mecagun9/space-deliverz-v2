<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>스페이스 딜리버리Z</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: #0a0a0a;
            font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
            color: white;
            overflow: hidden;
            touch-action: none;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #gameContainer {
            width: 100%;
            max-width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        #prepScreen {
            background: rgba(20, 20, 30, 0.95);
            border: 2px solid #4466aa;
            border-radius: 12px;
            padding: 20px;
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
        }
        
        .title {
            font-size: 20px;
            color: #88aaff;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .section {
            background: rgba(30, 40, 50, 0.6);
            border: 1px solid #445566;
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
        }
        
        .section-title {
            font-size: 14px;
            color: #ffaa00;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin: 8px 0;
        }
        
        .card {
            background: rgba(40, 50, 60, 0.6);
            border: 2px solid #555;
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            font-size: 11px;
            text-align: center;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .card:active {
            transform: scale(0.95);
        }
        
        .card.selected {
            border-color: #88cc88;
            background: rgba(50, 100, 50, 0.4);
        }
        
        .cargo-card {
            background: rgba(60, 50, 30, 0.6);
            min-height: 80px;
        }
        
        .cargo-card.selected {
            border-color: #cc8844;
            background: rgba(100, 70, 30, 0.4);
        }
        
        .btn {
            background: linear-gradient(45deg, #334455, #445566);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn:disabled {
            background: #333;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .btn-start {
            background: linear-gradient(45deg, #446644, #558855);
            font-size: 16px;
            padding: 15px 30px;
            margin-top: 20px;
        }
        
        .status-display {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #888;
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 12px;
            color: #ffdd00;
            margin: 8px 0;
        }
        
        .mobile-instructions {
            background: rgba(30, 50, 50, 0.4);
            border: 1px solid #446666;
            border-radius: 6px;
            padding: 10px;
            margin: 15px 0;
            font-size: 11px;
            color: #88cccc;
            line-height: 1.4;
        }
        
        #gameScreen {
            width: 100%;
            height: 100vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        #gameCanvas {
            border: 2px solid #445566;
            background: #000011;
            border-radius: 8px;
        }
        
        #gameInfo {
            margin-top: 10px;
            font-size: 12px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 5px;
            max-width: 100%;
        }
        
        #gameInfo span {
            background: rgba(0, 0, 0, 0.7);
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid #444;
        }
        
        #upgradePanel {
            margin-top: 10px;
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .upgrade-btn {
            background: linear-gradient(45deg, #664433, #775544);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            cursor: pointer;
            text-align: center;
            min-width: 80px;
            transition: all 0.3s ease;
        }
        
        .upgrade-btn:active {
            transform: scale(0.95);
        }
        
        .upgrade-btn:disabled {
            background: #333;
            cursor: not-allowed;
        }
        
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 10, 20, 0.95);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
            border: 3px solid #6688aa;
            z-index: 1000;
            max-width: 90vw;
        }
        
        .modal h2 {
            margin-bottom: 15px;
            color: #88aaff;
        }
        
        .modal p {
            margin: 8px 0;
            font-size: 14px;
        }
        
        @media (max-width: 480px) {
            #prepScreen {
                padding: 15px;
                max-width: 95vw;
            }
            
            .title {
                font-size: 18px;
            }
            
            .card {
                font-size: 10px;
                padding: 6px;
                min-height: 50px;
            }
            
            .cargo-card {
                min-height: 70px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- 준비 화면 -->
        <div id="prepScreen">
            <div class="title">🚀 SPACE DELIVERY Z 🚀</div>
            
            <!-- 게임 목표 -->
            <div style="background: rgba(30, 40, 30, 0.4); border: 1px solid #556655; border-radius: 8px; padding: 10px; margin: 10px 0; font-size: 12px; color: #aaffaa;">
                <strong>🎯 게임 목표:</strong> 제한 시간 내에 화물을 안전하게 배송하세요!<br>
                💰 골드로 임시 업그레이드 | 💎 다이아로 영구 업그레이드
            </div>
            
            <div class="section">
                <div class="section-title">💼 골드: <span id="prepGold">100</span> | 💎 다이아: <span id="prepDiamonds">0</span></div>
            </div>
            
            <!-- 영구 업그레이드 -->
            <div class="section">
                <div class="section-title">🔧 우주선 영구 업그레이드 (다이아)</div>
                <div class="grid">
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">🚀 엔진</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="shipSpeedLevel">1</span> | +<span id="speedBonus">0</span>%</div>
                        <button class="btn" onclick="gameManager.upgradeShipSpeed()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            업그레이드 (<span id="speedUpgradeCost">5</span>💎)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">🎯 포탑</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="maxTurretLevel">1</span> | 최대 <span id="maxTurrets">3</span></div>
                        <button class="btn" onclick="gameManager.upgradeMaxTurrets()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            업그레이드 (<span id="turretUpgradeCost">8</span>💎)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">📦 화물</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="cargoCapacityLevel">1</span> | +<span id="cargoSlotBonus">0</span>슬롯</div>
                        <button class="btn" onclick="gameManager.upgradeCargoCapacity()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            업그레이드 (<span id="cargoUpgradeCost">10</span>💎)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">🔥 연사</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="fireRateLevel">1</span> | +<span id="fireRateBonus">0</span>%</div>
                        <button class="btn" onclick="gameManager.upgradeFireRate()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            업그레이드 (<span id="fireRateUpgradeCost">6</span>💎)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">💣 기뢰</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="mineLevel">0</span> | <span id="mineCount">0</span>개/분</div>
                        <button class="btn" onclick="gameManager.upgradeMines()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            업그레이드 (<span id="mineUpgradeCost">12</span>💎)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">🛡️ 드론</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="droneLevel">0</span> | <span id="droneTime">0</span>초</div>
                        <button class="btn" onclick="gameManager.upgradeDrones()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            업그레이드 (<span id="droneUpgradeCost">15</span>💎)
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">🚀 목적지 선택</div>
                <div class="grid">
                    <div class="card" data-destination="nearby" onclick="gameManager.selectDestination('nearby')">
                        <div>🌍 근거리 행성</div>
                        <div style="font-size: 9px; color: #8f8;">⏰ 2분 | ⭐ 위험도 낮음</div>
                        <div style="font-size: 9px; color: #aaa;">보상: 기본</div>
                    </div>
                    <div class="card" data-destination="medium" onclick="gameManager.selectDestination('medium')">
                        <div>🪐 중거리 행성</div>
                        <div style="font-size: 9px; color: #ff8;">⏰ 2.5분 | ⭐⭐ 위험도 중간</div>
                        <div style="font-size: 9px; color: #8f8;">보상: +20%</div>
                    </div>
                    <div class="card" data-destination="far" onclick="gameManager.selectDestination('far')">
                        <div>🌌 원거리 행성</div>
                        <div style="font-size: 9px; color: #f88;">⏰ 3분 | ⭐⭐⭐ 위험도 높음</div>
                        <div style="font-size: 9px; color: #8f8;">보상: +50%</div>
                    </div>
                    <div class="card" data-destination="dangerous" onclick="gameManager.selectDestination('dangerous')">
                        <div>⚠️ 위험 지역</div>
                        <div style="font-size: 9px; color: #f66;">⏰ 3.5분 | ⭐⭐⭐⭐ 매우 위험</div>
                        <div style="font-size: 9px; color: #8f8;">보상: +100%</div>
                    </div>
                </div>
                <div id="destinationInfo" style="background: rgba(30, 50, 30, 0.3); border: 1px solid #556655; border-radius: 5px; padding: 8px; margin: 8px 0; display: none; font-size: 11px;">
                    <strong>선택된 목적지:</strong> <span id="selectedDestName">없음</span><br>
                    <span id="selectedDestDesc">목적지를 선택해주세요.</span><br>
                    <span id="selectedDestDetails"></span>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">📦 화물 선택 (최대 <span id="maxCargoDisplay">2</span>개)</div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 6px; margin: 8px 0;">
                    <div class="cargo-card" data-cargo="military" onclick="gameManager.selectCargo('military')">
                        <div>🔫 군사물자</div>
                        <div style="font-size: 9px; color: #8f8;">공격력 +50%</div>
                        <div style="font-size: 9px; color: #f88;">적 증가</div>
                        <div style="font-size: 9px; color: #8ff;">💎 +15</div>
                    </div>
                    <div class="cargo-card" data-cargo="medical" onclick="gameManager.selectCargo('medical')">
                        <div>🏥 의료용품</div>
                        <div style="font-size: 9px; color: #8f8;">생명력 +1</div>
                        <div style="font-size: 9px; color: #f88;">속도 -10%</div>
                        <div style="font-size: 9px; color: #8ff;">💎 +10</div>
                    </div>
                    <div class="cargo-card" data-cargo="energy" onclick="gameManager.selectCargo('energy')">
                        <div>⚡ 에너지셀</div>
                        <div style="font-size: 9px; color: #8f8;">연사속도 +30%</div>
                        <div style="font-size: 9px; color: #f88;">폭발위험</div>
                        <div style="font-size: 9px; color: #8ff;">💎 +12</div>
                    </div>
                    <div class="cargo-card" data-cargo="luxury" onclick="gameManager.selectCargo('luxury')">
                        <div>💎 고급품</div>
                        <div style="font-size: 9px; color: #8f8;">다이아 +100%</div>
                        <div style="font-size: 9px; color: #f88;">속도 -20%</div>
                        <div style="font-size: 9px; color: #8ff;">💎 +25</div>
                    </div>
                </div>
                
                <div class="status-display">
                    선택된 화물: <span id="selectedCargoCount">0</span>/<span id="maxCargoSlots">2</span>
                </div>
            </div>
            
            <button class="btn btn-start" id="startBtn" onclick="gameManager.startGame()" disabled>🚀 미션 시작</button>
            
            <div class="mobile-instructions">
                📱 <strong>모바일 조작법:</strong><br>
                • 화면을 터치하면 우주선이 그 위치로 이동<br>
                • 자동으로 총알 발사됨<br>
                • 3단계: 순양함 | 4단계: 항공모함 | 5단계: 보스 등장!
            </div>
        </div>
        
        <!-- 게임 화면 -->
        <div id="gameScreen">
            <canvas id="gameCanvas" width="800" height="600"></canvas>
            <div id="gameInfo">
                <span>점수: <span id="score">0</span></span>
                <span>💰 <span id="gold">100</span></span>
                <span>❤️ <span id="lives">3</span></span>
                <span>⏰ <span id="timer">120</span>s</span>
                <span>🎯 포탑: <span id="turretCount">1</span></span>
                <span>스테이지: <span id="currentStage">1</span></span>
            </div>
            
            <div id="upgradePanel">
                <button class="upgrade-btn" onclick="gameManager.addTurret()">
                    🎯 포탑 추가<br><span id="turretCost">100골드</span>
                </button>
                <button class="upgrade-btn" onclick="gameManager.upgradeDamage()">
                    ⚔️ 공격력<br><span id="damageCost">50골드</span>
                </button>
                <button class="upgrade-btn" onclick="gameManager.upgradeSpeed()">
                    ⚡ 속도<br><span id="speedCost">75골드</span>
                </button>
            </div>
            
            <button class="btn" onclick="gameManager.returnToPrep()">🔙 준비화면으로</button>
        </div>
        
        <!-- 게임 오버 모달 -->
        <div id="gameOverModal" class="modal">
            <h2>💥 미션 실패!</h2>
            <p>최종 점수: <span id="finalScore">0</span></p>
            <button class="btn" onclick="gameManager.returnToPrep()">재도전</button>
        </div>
        
        <!-- 스테이지 클리어 모달 -->
        <div id="stageClearModal" class="modal">
            <h2>🎉 배송 성공!</h2>
            <p>획득 골드: <span id="rewardGold">0</span></p>
            <p>💎 획득 다이아: <span id="rewardDiamonds">0</span></p>
            <button class="btn" onclick="gameManager.returnToPrep()">다음 배송</button>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
