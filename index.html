<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ìŠ¤í˜ì´ìŠ¤ ë”œë¦¬ë²„ë¦¬Z</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: #0a0a0a;
            font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
            color: white;
            overflow: hidden;
            touch-action: none;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #gameContainer {
            width: 100%;
            max-width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        #prepScreen {
            background: rgba(20, 20, 30, 0.95);
            border: 2px solid #4466aa;
            border-radius: 12px;
            padding: 20px;
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
        }
        
        .title {
            font-size: 20px;
            color: #88aaff;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .section {
            background: rgba(30, 40, 50, 0.6);
            border: 1px solid #445566;
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
        }
        
        .section-title {
            font-size: 14px;
            color: #ffaa00;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin: 8px 0;
        }
        
        .card {
            background: rgba(40, 50, 60, 0.6);
            border: 2px solid #555;
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            font-size: 11px;
            text-align: center;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .card:active {
            transform: scale(0.95);
        }
        
        .card.selected {
            border-color: #88cc88;
            background: rgba(50, 100, 50, 0.4);
        }
        
        .cargo-card {
            background: rgba(60, 50, 30, 0.6);
            min-height: 80px;
        }
        
        .cargo-card.selected {
            border-color: #cc8844;
            background: rgba(100, 70, 30, 0.4);
        }
        
        .btn {
            background: linear-gradient(45deg, #334455, #445566);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn:disabled {
            background: #333;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .btn-start {
            background: linear-gradient(45deg, #446644, #558855);
            font-size: 16px;
            padding: 15px 30px;
            margin-top: 20px;
        }
        
        .status-display {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #888;
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 12px;
            color: #ffdd00;
            margin: 8px 0;
        }
        
        .mobile-instructions {
            background: rgba(30, 50, 50, 0.4);
            border: 1px solid #446666;
            border-radius: 6px;
            padding: 10px;
            margin: 15px 0;
            font-size: 11px;
            color: #88cccc;
            line-height: 1.4;
        }
        
        #gameScreen {
            width: 100%;
            height: 100vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        #gameCanvas {
            border: 2px solid #445566;
            background: #000011;
            border-radius: 8px;
        }
        
        #gameInfo {
            margin-top: 10px;
            font-size: 12px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 5px;
            max-width: 100%;
        }
        
        #gameInfo span {
            background: rgba(0, 0, 0, 0.7);
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid #444;
        }
        
        #upgradePanel {
            margin-top: 10px;
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .upgrade-btn {
            background: linear-gradient(45deg, #664433, #775544);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            cursor: pointer;
            text-align: center;
            min-width: 80px;
            transition: all 0.3s ease;
        }
        
        .upgrade-btn:active {
            transform: scale(0.95);
        }
        
        .upgrade-btn:disabled {
            background: #333;
            cursor: not-allowed;
        }
        
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 10, 20, 0.95);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
            border: 3px solid #6688aa;
            z-index: 1000;
            max-width: 90vw;
        }
        
        .modal h2 {
            margin-bottom: 15px;
            color: #88aaff;
        }
        
        .modal p {
            margin: 8px 0;
            font-size: 14px;
        }
        
        @media (max-width: 480px) {
            #prepScreen {
                padding: 15px;
                max-width: 95vw;
            }
            
            .title {
                font-size: 18px;
            }
            
            .card {
                font-size: 10px;
                padding: 6px;
                min-height: 50px;
            }
            
            .cargo-card {
                min-height: 70px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- ì¤€ë¹„ í™”ë©´ -->
        <div id="prepScreen">
            <div class="title">ğŸš€ SPACE DELIVERY Z ğŸš€</div>
            
            <!-- ê²Œì„ ëª©í‘œ -->
            <div style="background: rgba(30, 40, 30, 0.4); border: 1px solid #556655; border-radius: 8px; padding: 10px; margin: 10px 0; font-size: 12px; color: #aaffaa;">
                <strong>ğŸ¯ ê²Œì„ ëª©í‘œ:</strong> ì œí•œ ì‹œê°„ ë‚´ì— í™”ë¬¼ì„ ì•ˆì „í•˜ê²Œ ë°°ì†¡í•˜ì„¸ìš”!<br>
                ğŸ’° ê³¨ë“œë¡œ ì„ì‹œ ì—…ê·¸ë ˆì´ë“œ | ğŸ’ ë‹¤ì´ì•„ë¡œ ì˜êµ¬ ì—…ê·¸ë ˆì´ë“œ
            </div>
            
            <div class="section">
                <div class="section-title">ğŸ’¼ ê³¨ë“œ: <span id="prepGold">100</span> | ğŸ’ ë‹¤ì´ì•„: <span id="prepDiamonds">0</span></div>
            </div>
            
            <!-- ì˜êµ¬ ì—…ê·¸ë ˆì´ë“œ -->
            <div class="section">
                <div class="section-title">ğŸ”§ ìš°ì£¼ì„  ì˜êµ¬ ì—…ê·¸ë ˆì´ë“œ (ë‹¤ì´ì•„)</div>
                <div class="grid">
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">ğŸš€ ì—”ì§„</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="shipSpeedLevel">1</span> | +<span id="speedBonus">0</span>%</div>
                        <button class="btn" onclick="gameManager.upgradeShipSpeed()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            ì—…ê·¸ë ˆì´ë“œ (<span id="speedUpgradeCost">5</span>ğŸ’)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">ğŸ¯ í¬íƒ‘</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="maxTurretLevel">1</span> | ìµœëŒ€ <span id="maxTurrets">3</span></div>
                        <button class="btn" onclick="gameManager.upgradeMaxTurrets()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            ì—…ê·¸ë ˆì´ë“œ (<span id="turretUpgradeCost">8</span>ğŸ’)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">ğŸ“¦ í™”ë¬¼</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="cargoCapacityLevel">1</span> | +<span id="cargoSlotBonus">0</span>ìŠ¬ë¡¯</div>
                        <button class="btn" onclick="gameManager.upgradeCargoCapacity()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            ì—…ê·¸ë ˆì´ë“œ (<span id="cargoUpgradeCost">10</span>ğŸ’)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">ğŸ”¥ ì—°ì‚¬</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="fireRateLevel">1</span> | +<span id="fireRateBonus">0</span>%</div>
                        <button class="btn" onclick="gameManager.upgradeFireRate()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            ì—…ê·¸ë ˆì´ë“œ (<span id="fireRateUpgradeCost">6</span>ğŸ’)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">ğŸ’£ ê¸°ë¢°</div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="mineLevel">0</span> | <span id="mineCount">0</span>ê°œ/ë¶„</div>
                        <button class="btn" onclick="gameManager.upgradeMines()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            ì—…ê·¸ë ˆì´ë“œ (<span id="mineUpgradeCost">12</span>ğŸ’)
                        </button>
                    </div>
                    <div class="card" style="background: rgba(40, 60, 80, 0.5); min-height: 70px;">
                        <div style="font-weight: bold; color: #88aaff; font-size: 12px;">ğŸ›¡ï¸ ë“œë¡ </div>
                        <div style="font-size: 9px; color: #ccc;">Lv.<span id="droneLevel">0</span> | <span id="droneTime">0</span>ì´ˆ</div>
                        <button class="btn" onclick="gameManager.upgradeDrones()" style="font-size: 10px; padding: 4px 8px; margin: 2px 0;">
                            ì—…ê·¸ë ˆì´ë“œ (<span id="droneUpgradeCost">15</span>ğŸ’)
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">ğŸš€ ëª©ì ì§€ ì„ íƒ</div>
                <div class="grid">
                    <div class="card" data-destination="nearby" onclick="gameManager.selectDestination('nearby')">
                        <div>ğŸŒ ê·¼ê±°ë¦¬ í–‰ì„±</div>
                        <div style="font-size: 9px; color: #8f8;">â° 2ë¶„ | â­ ìœ„í—˜ë„ ë‚®ìŒ</div>
                        <div style="font-size: 9px; color: #aaa;">ë³´ìƒ: ê¸°ë³¸</div>
                    </div>
                    <div class="card" data-destination="medium" onclick="gameManager.selectDestination('medium')">
                        <div>ğŸª ì¤‘ê±°ë¦¬ í–‰ì„±</div>
                        <div style="font-size: 9px; color: #ff8;">â° 2.5ë¶„ | â­â­ ìœ„í—˜ë„ ì¤‘ê°„</div>
                        <div style="font-size: 9px; color: #8f8;">ë³´ìƒ: +20%</div>
                    </div>
                    <div class="card" data-destination="far" onclick="gameManager.selectDestination('far')">
                        <div>ğŸŒŒ ì›ê±°ë¦¬ í–‰ì„±</div>
                        <div style="font-size: 9px; color: #f88;">â° 3ë¶„ | â­â­â­ ìœ„í—˜ë„ ë†’ìŒ</div>
                        <div style="font-size: 9px; color: #8f8;">ë³´ìƒ: +50%</div>
                    </div>
                    <div class="card" data-destination="dangerous" onclick="gameManager.selectDestination('dangerous')">
                        <div>âš ï¸ ìœ„í—˜ ì§€ì—­</div>
                        <div style="font-size: 9px; color: #f66;">â° 3.5ë¶„ | â­â­â­â­ ë§¤ìš° ìœ„í—˜</div>
                        <div style="font-size: 9px; color: #8f8;">ë³´ìƒ: +100%</div>
                    </div>
                </div>
                <div id="destinationInfo" style="background: rgba(30, 50, 30, 0.3); border: 1px solid #556655; border-radius: 5px; padding: 8px; margin: 8px 0; display: none; font-size: 11px;">
                    <strong>ì„ íƒëœ ëª©ì ì§€:</strong> <span id="selectedDestName">ì—†ìŒ</span><br>
                    <span id="selectedDestDesc">ëª©ì ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</span><br>
                    <span id="selectedDestDetails"></span>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">ğŸ“¦ í™”ë¬¼ ì„ íƒ (ìµœëŒ€ <span id="maxCargoDisplay">2</span>ê°œ)</div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 6px; margin: 8px 0;">
                    <div class="cargo-card" data-cargo="military" onclick="gameManager.selectCargo('military')">
                        <div>ğŸ”« êµ°ì‚¬ë¬¼ì</div>
                        <div style="font-size: 9px; color: #8f8;">ê³µê²©ë ¥ +50%</div>
                        <div style="font-size: 9px; color: #f88;">ì  ì¦ê°€</div>
                        <div style="font-size: 9px; color: #8ff;">ğŸ’ +15</div>
                    </div>
                    <div class="cargo-card" data-cargo="medical" onclick="gameManager.selectCargo('medical')">
                        <div>ğŸ¥ ì˜ë£Œìš©í’ˆ</div>
                        <div style="font-size: 9px; color: #8f8;">ìƒëª…ë ¥ +1</div>
                        <div style="font-size: 9px; color: #f88;">ì†ë„ -10%</div>
                        <div style="font-size: 9px; color: #8ff;">ğŸ’ +10</div>
                    </div>
                    <div class="cargo-card" data-cargo="energy" onclick="gameManager.selectCargo('energy')">
                        <div>âš¡ ì—ë„ˆì§€ì…€</div>
                        <div style="font-size: 9px; color: #8f8;">ì—°ì‚¬ì†ë„ +30%</div>
                        <div style="font-size: 9px; color: #f88;">í­ë°œìœ„í—˜</div>
                        <div style="font-size: 9px; color: #8ff;">ğŸ’ +12</div>
                    </div>
                    <div class="cargo-card" data-cargo="luxury" onclick="gameManager.selectCargo('luxury')">
                        <div>ğŸ’ ê³ ê¸‰í’ˆ</div>
                        <div style="font-size: 9px; color: #8f8;">ë‹¤ì´ì•„ +100%</div>
                        <div style="font-size: 9px; color: #f88;">ì†ë„ -20%</div>
                        <div style="font-size: 9px; color: #8ff;">ğŸ’ +25</div>
                    </div>
                </div>
                
                <div class="status-display">
                    ì„ íƒëœ í™”ë¬¼: <span id="selectedCargoCount">0</span>/<span id="maxCargoSlots">2</span>
                </div>
            </div>
            
            <button class="btn btn-start" id="startBtn" onclick="gameManager.startGame()" disabled>ğŸš€ ë¯¸ì…˜ ì‹œì‘</button>
            
            <div class="mobile-instructions">
                ğŸ“± <strong>ëª¨ë°”ì¼ ì¡°ì‘ë²•:</strong><br>
                â€¢ í™”ë©´ì„ í„°ì¹˜í•˜ë©´ ìš°ì£¼ì„ ì´ ê·¸ ìœ„ì¹˜ë¡œ ì´ë™<br>
                â€¢ ìë™ìœ¼ë¡œ ì´ì•Œ ë°œì‚¬ë¨<br>
                â€¢ 3ë‹¨ê³„: ìˆœì–‘í•¨ | 4ë‹¨ê³„: í•­ê³µëª¨í•¨ | 5ë‹¨ê³„: ë³´ìŠ¤ ë“±ì¥!
            </div>
        </div>
        
        <!-- ê²Œì„ í™”ë©´ -->
        <div id="gameScreen">
            <canvas id="gameCanvas" width="800" height="600"></canvas>
            <div id="gameInfo">
                <span>ì ìˆ˜: <span id="score">0</span></span>
                <span>ğŸ’° <span id="gold">100</span></span>
                <span>â¤ï¸ <span id="lives">3</span></span>
                <span>â° <span id="timer">120</span>s</span>
                <span>ğŸ¯ í¬íƒ‘: <span id="turretCount">1</span></span>
                <span>ìŠ¤í…Œì´ì§€: <span id="currentStage">1</span></span>
            </div>
            
            <div id="upgradePanel">
                <button class="upgrade-btn" onclick="gameManager.addTurret()">
                    ğŸ¯ í¬íƒ‘ ì¶”ê°€<br><span id="turretCost">100ê³¨ë“œ</span>
                </button>
                <button class="upgrade-btn" onclick="gameManager.upgradeDamage()">
                    âš”ï¸ ê³µê²©ë ¥<br><span id="damageCost">50ê³¨ë“œ</span>
                </button>
                <button class="upgrade-btn" onclick="gameManager.upgradeSpeed()">
                    âš¡ ì†ë„<br><span id="speedCost">75ê³¨ë“œ</span>
                </button>
            </div>
            
            <button class="btn" onclick="gameManager.returnToPrep()">ğŸ”™ ì¤€ë¹„í™”ë©´ìœ¼ë¡œ</button>
        </div>
        
        <!-- ê²Œì„ ì˜¤ë²„ ëª¨ë‹¬ -->
        <div id="gameOverModal" class="modal">
            <h2>ğŸ’¥ ë¯¸ì…˜ ì‹¤íŒ¨!</h2>
            <p>ìµœì¢… ì ìˆ˜: <span id="finalScore">0</span></p>
            <button class="btn" onclick="gameManager.returnToPrep()">ì¬ë„ì „</button>
        </div>
        
        <!-- ìŠ¤í…Œì´ì§€ í´ë¦¬ì–´ ëª¨ë‹¬ -->
        <div id="stageClearModal" class="modal">
            <h2>ğŸ‰ ë°°ì†¡ ì„±ê³µ!</h2>
            <p>íšë“ ê³¨ë“œ: <span id="rewardGold">0</span></p>
            <p>ğŸ’ íšë“ ë‹¤ì´ì•„: <span id="rewardDiamonds">0</span></p>
            <button class="btn" onclick="gameManager.returnToPrep()">ë‹¤ìŒ ë°°ì†¡</button>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
